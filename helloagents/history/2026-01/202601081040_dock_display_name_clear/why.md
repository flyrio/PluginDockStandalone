# 方案名称: 修复显示名称清空残留字符

## 需求背景
收纳内容中“显示名称”输入框在全选删除后出现残留字符（如“w===”），导致条目显示名异常。用户期望清空后强制回退为原名。
此外，自定义图标路径填写后清空，原始图标无法回退。

## 用户画像

### 目标用户画像
- **用户类型:** FFXIV Dalamud 插件使用者
- **用户目标:** 快速为 Dock 条目设置/清空显示别名
- **用户能力:** 熟悉基础 UI 操作

### 使用场景/痛点
- **场景:** 配置 Dock 条目显示名称或自定义图标路径后全选删除
- **痛点:** 显示名残留乱码、图标无法回退为原始图标

### 需求价值
提升显示名称与图标编辑的可预期性，避免错误显示导致的识别与操作成本。

## 需求范围
1. 修复输入缓冲解码导致的残留字符
2. 保证清空后显示名回退为原名
3. 保证清空自定义图标路径后回退原始图标

## 验收标准
- **UI:** 显示名称清空后显示原名，不再出现“==”残留
- **UI:** 自定义图标路径清空后显示原始图标
- **数据:** CustomDisplayName 与 CustomIconPath 可为空或空白，逻辑一致
- **API:** 无变更
- **性能:** 无感知性能回退

## 风险与边界

### 风险: 输入解码影响其他文本框
**描述:** 修改 UTF-8 缓冲解码逻辑可能影响搜索、命令、自定义图标路径等输入框。
需要确保仅改变截断逻辑，不破坏多字节字符。

#### 边界: 仅处理 ImGui 输入缓冲截断
- 仅改变字符串解析方式
- 不修改 ImGui 调用参数或数据结构

## 关键假设
- **输入缓冲:** ImGui 在清空时会将首字节置为 '\0'
- **回退逻辑:** 现有显示名与图标回退逻辑可复用
