# 轻量迭代任务: 禁止隐藏/收纳自身

范围: `helloagents/plan/202601150028_self_protect/`

---

## 1. 禁止隐藏自身窗口
- [√] 1.1 为窗口隐藏逻辑增加“自保护”判断：本插件相关窗口不可加入隐藏列表
- [√] 1.2 限制 `/pdock hidewin`：若目标为本插件相关窗口则拒绝并提示
- [√] 1.3 导入预设/分享码时过滤本插件相关窗口，避免写入配置
- [√] 1.4 启动时清理历史配置中已存在的“自身窗口隐藏项”，避免误配置导致无法操作

## 2. 禁止收纳自身与自身窗口
- [√] 2.1 插件收纳列表过滤自身插件，避免被加入 Dock
- [√] 2.2 窗口列表“收纳”按钮对自身相关窗口禁用/拒绝
- [√] 2.3 启动时清理历史配置中已存在的“自身插件/窗口收纳项”

## 3. 验证
- [√] 3.1 编译验证（`dotnet build -c Release`）
- [-] 3.2 手动验证：无法隐藏/收纳自身及相关窗口（UI 与命令均生效）
  > 备注: 需要在游戏内验证（建议分别从 UI 与 `/pdock hidewin` 验证）

## 4. 知识库
- [√] 4.1 更新 `helloagents/wiki/modules/plugindock.md` 记录限制与原因
- [√] 4.2 更新 `helloagents/CHANGELOG.md` 记录变更
